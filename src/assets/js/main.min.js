"use strict";!function(){angular.module("controlpanel",["ui.router","ui.router.state.events","ngDialog","LocalStorageModule","controlpanel.core","controlpanel.home","controlpanel.login","controlpanel.user","controlpanel.item","controlpanel.error","controlpanel.settings"])}();
"use strict";!function(){function o(o){var n=this;n.isLogged=o.isLoggedIn}angular.module("controlpanel").controller("controlpanelController",o),o.$inject=["CoreAuthService"]}();
"use strict";!function(){function e(e){e.otherwise("/login")}function o(e){e.setPrefix("controlpanel")}function n(e,o,n){e.$on("$stateChangeStart",function(e,r,t,i,l){r.error||("/access-denied"!=r.url||t.route||(e.preventDefault(),o.go(i.name)),n.isLoggedIn()||"/login"==r.url||(e.preventDefault(),o.go("login")),n.isLoggedIn()&&"/login"==r.url&&(e.preventDefault(),o.go("home")),r.role&&!n.hasRole(r.role)&&(e.preventDefault(),o.go("access-denied",{route:r.name})))})}angular.module("controlpanel").config(e).config(o).run(["$rootScope","$state","CoreAuthService",n]),e.$inject=["$urlRouterProvider"],o.$inject=["localStorageServiceProvider"]}();
"use strict";!function(){angular.module("controlpanel.error",[])}();
"use strict";!function(){function e(e){e.state("home",{url:"/home",views:{menu:{template:"<menu></menu>"},body:{templateUrl:"modules/home/home.html",controller:"homeController",controllerAs:"vm"}}})}angular.module("controlpanel.home",[]),angular.module("controlpanel.home").config(e),e.$inject=["$stateProvider"]}();
"use strict";!function(){function t(t,e,n,o){var r=this;r.data=t,r.userLogged=o.getTokenData();var c=function(){r.data.menuItemActive="home",e.lastInserts().then(function(t){r.listItems=t,e.totItems().then(function(t){return r.countItem=t.count})}),n.lastInserts().then(function(t){r.listUsers=t,n.totUsers().then(function(t){return r.countUser=t.count})})};c()}angular.module("controlpanel.home").controller("homeController",t),t.$inject=["DataFactory","CoreItemService","CoreUserService","CoreAuthService"]}();
"use strict";!function(){function e(){}angular.module("controlpanel.home").service("homeService",e),e.$inject=[]}();
"use strict";!function(){function e(e){e.state("item",{url:"/item",views:{menu:{template:"<menu></menu>"},body:{templateUrl:"modules/item/item.html",controller:"itemController",controllerAs:"vm"}}})}angular.module("controlpanel.item",[]).config(e),e.$inject=["$stateProvider"]}();
"use strict";!function(){function e(e,t,n,o,i,l){var r=this;r.data=e,r.filterItem={name:"",status:""};var s=function(){r.data.menuItemActive="item",n.getListItem(r.filterItem).then(function(e){return"server undefined"===e?void l.go("server-undefined"):void(r.listItens=e)})};s(),r.newItem=function(){var e=t.open({templateUrl:"modules/item/itemModal.html",className:"ngdialog-theme-default",closeByDocument:!1,closeByEscape:!1,showClose:!1,controller:"itemModelController",controllerAs:"vm"});e.closePromise.then(function(e){e.value&&(i.openDialog(e.value.message),r.listItens.push(e.value.item))})},r.editItem=function(e){var n=t.open({templateUrl:"modules/item/itemModal.html",className:"ngdialog-theme-default",closeByDocument:!1,closeByEscape:!1,showClose:!1,controller:"itemModelController",controllerAs:"vm",data:{item:e}});n.closePromise.then(function(e){if(e.value){if("string"==typeof e.value)return void i.openDialog(e.value);i.openDialog(e.value.message);var t=0;r.listItens.find(function(n){return t++,n._id===e.value.item._id}),r.listItens.splice(t-1,1,e.value.item)}})},r.deleteItem=function(e){i.openDialogConfirm("Deseja deletar "+e.name+" ?").then(function(t){t&&n.deleteItem(e._id).then(function(t){if("server undefined"===t)return void l.go("server-undefined");i.openDialog(t.message);var n=0;r.listItens.find(function(t){return n++,t._id===e._id}),r.listItens.splice(n-1,1)})})},r.search=function(){n.getListItem(r.filterItem).then(function(e){return"server undefined"===e?void l.go("server-undefined"):void(r.listItens=e)})}}angular.module("controlpanel.item").controller("itemController",e),e.$inject=["DataFactory","ngDialog","CoreItemService","$scope","DialogFactory","$state"]}();
"use strict";!function(){function e(){}angular.module("controlpanel.item").service("itemService",e),e.$inject=[]}();
"use strict";!function(){function e(e,i,t,o){var n=this,a=i.getTokenData(),r=function(){n.item=t.ngDialogData?angular.copy(t.ngDialogData.item):{}};r(),n.saveItem=function(){return n.item._id?(angular.equals(t.ngDialogData.item,n.item)&&t.closeThisDialog("Registro atualizado com sucesso."),void e.updateItem(n.item).then(function(e){return"server undefined"===e?(t.closeThisDialog(),void o.go("server-undefined")):void t.closeThisDialog({message:e,item:n.item})})):(n.item.user={_id:a._id,name:a.name},void e.saveItem(n.item).then(function(e){return"server undefined"===e?(t.closeThisDialog(),void o.go("server-undefined")):void t.closeThisDialog(e)}))}}angular.module("controlpanel.item").controller("itemModelController",e),e.$inject=["CoreItemService","CoreAuthService","$scope","$state"]}();
"use strict";!function(){function t(t){t.state("settings",{url:"/settings",views:{menu:{template:"<menu></menu>"},body:{templateUrl:"modules/settings/settings.html",controller:"settingsController",controllerAs:"vm"}}})}angular.module("controlpanel.settings",[]).config(t),t.$inject=["$stateProvider"]}();
"use strict";!function(){function e(e,o,t,n,a){var s=this;s.data=e;var l=function(){s.data.menuItemActive="settings"};l(),s.changePassword=function(){var e=t.open({templateUrl:"modules/settings/partials/changePassword/changePassword.html",className:"ngdialog-theme-default",closeByDocument:!1,closeByEscape:!1,showClose:!1,controller:"changePasswordController",controllerAs:"vm"});e.closePromise.then(function(e){e.value&&a.openDialog(e.value.message)})},s.logout=function(){n.removeToken(),o.go("login")}}angular.module("controlpanel.settings").controller("settingsController",e),e.$inject=["DataFactory","$state","ngDialog","CoreAuthService","DialogFactory"]}();
"use strict";!function(){function e(e){e.state("user",{url:"/user",views:{menu:{template:"<menu></menu>"},body:{templateUrl:"modules/user/user.html",controller:"userController",controllerAs:"vm"}},role:"admin"})}angular.module("controlpanel.user",[]).config(e),e.$inject=["$stateProvider"]}();
"use strict";!function(){function e(e,r,o,s,n,t){var l=this;l.data=o;var i=n.getTokenData();l.listUsers=[],l.filterUser={name:"",role:""};var a=function(){l.data.menuItemActive="user",e.getListUser(l.filterUser).then(function(e){return"server undefined"===e?void t.go("server-undefined"):void(l.listUsers=e)})};a(),l.newUser=function(){var e=r.open({templateUrl:"modules/user/userModal.html",className:"ngdialog-theme-default",closeByDocument:!1,closeByEscape:!1,showClose:!1,controller:"userModelController",controllerAs:"vm"});e.closePromise.then(function(e){e.value&&(s.openDialog(e.value.message),l.listUsers.push(e.value.user))})},l.editUser=function(e){var o=r.open({templateUrl:"modules/user/userModal.html",className:"ngdialog-theme-default",closeByDocument:!1,closeByEscape:!1,showClose:!1,controller:"userModelController",controllerAs:"vm",data:{user:e}});o.closePromise.then(function(e){if(e.value){if("string"==typeof e.value)return void s.openDialog(e.value);s.openDialog(e.value.message);var r=0;l.listUsers.find(function(o){return r++,o._id===e.value.user._id}),l.listUsers.splice(r-1,1,e.value.user)}})},l.deleteUser=function(r){return i._id===r._id?void s.openDialog("O usuário logado não pode deletar ele mesmo."):void s.openDialogConfirm("Deseja deletar "+r.name+" ?").then(function(o){o&&e.deleteUser(r._id).then(function(e){if("server undefined"===e)return void t.go("server-undefined");s.openDialog(e.message);var o=0;l.listUsers.find(function(e){return o++,e._id===r._id}),l.listUsers.splice(o-1,1)})})},l.search=function(){e.getListUser(l.filterUser).then(function(e){return"server undefined"===e?void t.go("server-undefined"):void(l.listUsers=e)})}}angular.module("controlpanel.user").controller("userController",e),e.$inject=["CoreUserService","ngDialog","DataFactory","DialogFactory","CoreAuthService","$state"]}();
"use strict";!function(){function e(){}angular.module("controlpanel.user").service("userService",e),e.$inject=[]}();
"use strict";!function(){function e(e,o,r,s,i,a){var n=this,u=o.getTokenData();n.validateEmail=i.validateEmail;var l=function(){n.user=r.ngDialogData?angular.copy(r.ngDialogData.user):{}};l(),n.saveUser=function(){return n.user._id?n.user._id==u._id&&n.user.role!=u.role?void s.openDialog("O usuário logado não pode mudar o nível de acesso do mesmo."):(angular.equals(r.ngDialogData.user,n.user)&&r.closeThisDialog("Registro atualizado com sucesso."),void e.updateUser(n.user).then(function(e){return"server undefined"===e?(r.closeThisDialog(),void a.go("server-undefined")):void r.closeThisDialog({message:e.message,user:n.user})})):void e.saveUser(n.user).then(function(e){return"server undefined"===e?(r.closeThisDialog(),void a.go("server-undefined")):"string"==typeof e?void s.openDialog(e):void r.closeThisDialog(e)})}}angular.module("controlpanel.user").controller("userModelController",e),e.$inject=["CoreUserService","CoreAuthService","$scope","DialogFactory","REGEX","$state"]}();
"use strict";!function(){function l(l){l.state("login",{url:"/login",views:{body:{templateUrl:"modules/login/login.html",controller:"loginController",controllerAs:"vm"}}})}angular.module("controlpanel.login",[]).config(l),l.$inject=["$stateProvider"]}();
"use strict";!function(){function e(e,o,n,i,r,t){var l=this;l.login={email:"",password:""},l.msgError="",l.validateEmail=t.validateEmail,l.signIn=function(){o.login(l.login).then(function(e){return"server undefined"===e?void r.go("server-undefined"):e.message?void(l.msgError=e.message):void r.go("home")})["catch"](function(e){console.log(e)})}}angular.module("controlpanel.login").controller("loginController",e),e.$inject=["$http","CoreLoginService","CoreAuthService","CoreUserService","$state","REGEX"]}();
"use strict";!function(){function n(){}angular.module("controlpanel.login").service("loginService",n),n.$inject=[]}();
"use strict";!function(){function e(e){e.state("access-denied",{url:"/access-denied",views:{menu:{template:"<menu></menu>"},body:{templateUrl:"modules/error/access-denied/access-denied.html",controller:"accessDeniedController",controllerAs:"vm"}},params:{route:null}})}angular.module("controlpanel.error").config(e),e.$inject=["$stateProvider"]}();
"use strict";!function(){function t(t,a){var e=this;e.data=a;var r=function(){e.data.menuItemActive=t.route};r()}angular.module("controlpanel.error").controller("accessDeniedController",t),t.$inject=["$stateParams","DataFactory"]}();
"use strict";!function(){function e(e){e.state("server-undefined",{url:"/server-undefined",views:{menu:{template:'<menu"></menu>'},body:{templateUrl:"modules/error/server-undefined/server-undefined.html",controller:"serverUndefinedController",controllerAs:"vm"}},error:!0})}angular.module("controlpanel.error").config(e),e.$inject=["$stateProvider"]}();
"use strict";!function(){function e(e,r){var t=setInterval(function(){e.statusServer().then(function(e){"Server OK"===e&&(clearInterval(t),r.go("home"))})},5e3)}angular.module("controlpanel.error").controller("serverUndefinedController",e),e.$inject=["CoreStatusService","$state"]}();
"use strict";!function(){function s(s,e,o,a,r){var n=this;n.passwords={password:"",newPassword:"",email:e.getTokenData().email},n.repeatPassword="",n.changePassword=function(){return n.passwords.newPassword!==n.repeatPassword?void a.openDialog("Nova senha incorreta."):n.passwords.password===n.passwords.newPassword?void a.openDialog("A nova senha não pode ser igual a atual."):void s.changePassword(n.passwords).then(function(s){return"server undefined"===s?(o.closeThisDialog(),void r.go("server-undefined")):"Senha alterada com sucesso!"!==s.message?void a.openDialog(s.message):void o.closeThisDialog(s)})}}angular.module("controlpanel.settings").controller("changePasswordController",s),s.$inject=["CoreUserService","CoreAuthService","$scope","DialogFactory","$state"]}();
"use strict";!function(){function n(n,e,o,t){var r=this;r.compress=!1,r.data=t,r.menuCompress=function(){r.compress=!r.compress},r.changeScreen=function(n){return o.go(n)},angular.element(e).bind("resize",function(){console.log(e.innerWidth),e.innerWidth<=767&&r.compress&&(r.compress=!1,n.$apply())})}angular.module("controlpanel").component("menu",{bindings:{},templateUrl:"components/menu/menu.html",controller:n,controllerAs:"vm"}),n.$inject=["$scope","$window","$state","DataFactory"]}();
"use strict";!function(){function t(){var t={};return t}angular.module("controlpanel").factory("DataFactory",t),t.$inject=[]}();
"use strict";!function(){var t="http://127.0.0.1:3131/api/";angular.module("controlpanel").constant("CONST",{getLivros:t,getCupom:t.concat("getCupom")}).constant("REGEX",{validateEmail:/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i})}();
"use strict";!function(){function n(n,e){var o=function(e){return n.open({template:e,plain:!0,className:"ngdialog-theme-default",closeByDocument:!0,closeByEscape:!0,showClose:!1})},t=function(o){var t=e.defer();return n.openConfirm({template:"<div class='msg-dialog'> <div><span> "+o+"</span></div> <div class='msg-buttons'> <button class='btn btn-red btn-md' ng-click='closeThisDialog(0)'> Cancelar </button> <button class='btn btn-green btn-md' ng-click='confirm(1)'> OK </button> </div></div>",plain:!0,className:"ngdialog-theme-default",closeByDocument:!1,closeByEscape:!1,showClose:!1}).then(function(n){t.resolve(n)},function(n){t.resolve(n)}),t.promise};return{openDialog:o,openDialogConfirm:t}}angular.module("controlpanel").factory("DialogFactory",n),n.$inject=["ngDialog","$q"]}();
"use strict";!function(){function t(t,n){var e=this;e.get=function(n){return t.get(n).then(function(t){return t.data},function(t){return t})},e.post=function(n,e){return t.post(n,e).then(function(t){return t.data},function(t){return t})},e["delete"]=function(n){return t["delete"](n).then(function(t){return t.data},function(t){return t})},e.put=function(n){return t["delete"](n).then(function(t){return t.data},function(t){return t})}}angular.module("controlpanel").service("HTTPSERVICE",t),t.$inject=["$http","$q"]}();
"use strict";!function(){angular.module("controlpanel").directive("ngEnter",function(){return function(n,e,t){e.bind("keydown keypress",function(e){13===e.which&&(n.$apply(function(){n.$eval(t.ngEnter,{event:e})}),e.preventDefault())})}})}();