"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const joi = require("joi");
const schema = joi.object().keys({
    name: joi.string().required(),
    password: joi.string().min(6).required(),
    email: joi.string().email().required(),
    role: joi.string().valid('admin').valid('user').required()
});
async function validate(model) {
    return validateAsPromise(model, schema);
}
exports.validate = validate;
function validateAsPromise(model, schema) {
    return new Promise((resolve, reject) => {
        joi.validate(model, schema, { abortEarly: false, stripUnknown: { objects: true, arrays: false } }, (err, value) => {
            if (err)
                reject({ message: 'object-invalid' });
            resolve(value);
        });
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NlcnZlci9hZG1pbi92YWxpZGF0b3JzL3VzZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwyQkFBMkI7QUFHM0IsTUFBTSxNQUFNLEdBQUcsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQztJQUM3QixJQUFJLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLFFBQVEsRUFBRTtJQUM3QixRQUFRLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUU7SUFDeEMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxRQUFRLEVBQUU7SUFDdEMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLFFBQVEsRUFBRTtDQUM3RCxDQUFDLENBQUM7QUFFSSxLQUFLLG1CQUFtQixLQUFVO0lBQ3JDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBUSxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDbkQsQ0FBQztBQUZELDRCQUVDO0FBRUQsMkJBQThCLEtBQVUsRUFBRSxNQUFXO0lBQ2pELE1BQU0sQ0FBQyxJQUFJLE9BQU8sQ0FBSSxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsRUFBRTtRQUN4QyxHQUFHLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQU8sRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLEVBQUU7WUFDckgsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDO2dCQUFDLE1BQU0sQ0FBQyxFQUFDLE9BQU8sRUFBRSxnQkFBZ0IsRUFBQyxDQUFDLENBQUM7WUFDN0MsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2pCLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgam9pIGZyb20gJ2pvaSc7XG5pbXBvcnQgeyBJVXNlciB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvSVVzZXInO1xuXG5jb25zdCBzY2hlbWEgPSBqb2kub2JqZWN0KCkua2V5cyh7XG4gICAgbmFtZTogam9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gICAgcGFzc3dvcmQ6IGpvaS5zdHJpbmcoKS5taW4oNikucmVxdWlyZWQoKSxcbiAgICBlbWFpbDogam9pLnN0cmluZygpLmVtYWlsKCkucmVxdWlyZWQoKSxcbiAgICByb2xlOiBqb2kuc3RyaW5nKCkudmFsaWQoJ2FkbWluJykudmFsaWQoJ3VzZXInKS5yZXF1aXJlZCgpXG59KTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZhbGlkYXRlKG1vZGVsOiBhbnkpIHtcbiAgICByZXR1cm4gdmFsaWRhdGVBc1Byb21pc2U8SVVzZXI+KG1vZGVsLCBzY2hlbWEpO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZUFzUHJvbWlzZTxUPihtb2RlbDogYW55LCBzY2hlbWE6IGFueSk6IFByb21pc2U8VD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZTxUPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBqb2kudmFsaWRhdGUobW9kZWwsIHNjaGVtYSwgPGFueT57IGFib3J0RWFybHk6IGZhbHNlLCBzdHJpcFVua25vd246IHsgb2JqZWN0czogdHJ1ZSwgYXJyYXlzOiBmYWxzZSB9IH0sIChlcnIsIHZhbHVlKSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHJlamVjdCh7bWVzc2FnZTogJ29iamVjdC1pbnZhbGlkJ30pO1xuICAgICAgICByZXNvbHZlKHZhbHVlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9Il19